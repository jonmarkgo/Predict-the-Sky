
<script>
  function success(position) {
    var lat = $('#subscriber_latitude'); 
    var lng = $('#subscriber_longitude');
    
    lat.val(position.coords.latitude);
    lng.val(position.coords.longitude);
  }

  function error(msg) {
    $('#address_field').show();
    console.log(msg);
  }
  $(document).ready(function() {
    $('#address_field').hide();
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(success, error);
    } else {
      error('not supported');
    }
  });
</script>
<%= form_for(@subscriber) do |f| %>
  <% if @subscriber.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@subscriber.errors.count, "error") %> prohibited this subscriber from being saved:</h2>

      <ul>
      <% @subscriber.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :phonenumber %><br />
    <%= f.number_field :phonenumber %>
  </div>
  <%= f.hidden_field :latitude %>
  <%= f.hidden_field :longitude %>
  <div class="field" id="address_field">
    <label for="address">Address</label><br>
    <input id="address" name="address" size="30" type="text">
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
